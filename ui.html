<h2>Page Counter</h2>
<p id="page-count">Loading page count...</p>
<p id="error-message" style="color: red; display: none;"></p>
<button id="close">Close</button>
<script>
  // Listen for messages from the plugin code
  window.onmessage = (event) => {
    const message = event.data.pluginMessage;
    const pageCountElement = document.getElementById('page-count');
    const errorElement = document.getElementById('error-message');
    
    if (message.type === 'page-count') {
      pageCountElement.textContent = 
        `This file has ${message.count} page${message.count !== 1 ? 's' : ''}`;
      errorElement.style.display = 'none';
    } else if (message.type === 'error') {
      pageCountElement.textContent = 'Failed to count pages';
      errorElement.textContent = message.message;
      errorElement.style.display = 'block';
    }
  };

  document.getElementById('close').onclick = () => {
    parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*');
  };
</script>
